这是一个自定义的表单字段组件，可以用在`useVbenForm`的component属性中，直接创建一个input组件，输入一个id查询这个id对应的描述并显示。比如一个user对应一个role，这里就可以用这个组件来设置`user.role_id`的值

## 使用

在schema中设置`ForeignKey`就能使用它，但必须要传递一些参数

```ts
const schema = {
  fieldName: 'role_id',
  component: 'ForeignKey',
  label: '角色',
  componentProps: {},
};
```

参数`componentProps`

| 属性 | 描述 | 类型 | 默认值 |
| :-: | :-: | :-: | :-: |
| getDescByID | 首次加载数据时获取id对应的描述，需要返回一个string，如果发生异常需要正常抛出异常，组件会根据异常自动处理描述的值 | (id: string) => Promise<string> | - |
| descField | 表格的描述字段，外键对应的数据会包含多个字段，通过这个值来选取一个字段作为描述 | string | - |
| table | 外键表格的配置 | TableProps | - |
| desc | id对应的描述，这里可以不用传递数据，后续需要在rules中修改它 | string | - |

TableProps，表格配置

| 属性 | 描述 | 类型 | 默认值 |
| :-: | :-: | :-: | :-: |
| columns | 表格列，不传递的话只会显示一个id和单选框，建议传递一个描述字段 | Record<string, any>[] | [] |
| query | 表格通过这个方法获取数据 | (parms: any[]) => Promise<Record<string, any>[]> | - |
| responseResult | 整理表格数据，query方法请求到数据之后需要在这里整理，它需要返回扁平的数据结构，类似`[{id: 1, desc: '描述'}]` | (data: {data: Record<string, any>; }) => Record<string, any>[] | - |

修改`desc`

表单blur的时候需要手动校验数据并修改描述的值，可以参考user的role_id字段，思路就是字段blur的时候获取这个id对应的数据，拿到数据之后通过`formApi`修改desc的值

```ts
const checkRoleId = () => {
  // 获取id对应的数据，再修改desc
  formApi.updateSchema([
    {
      fieldName: 'role_id',
      componentProps: {
        // 直接修改组件的描述值
        desc: '描述',
      },
    },
  ]);
};
```

## 常见问题

1. 输入框输入id后，打开表格不会自动选中数据
   > 这个字段的值是string类型，如果从服务器获取到的id是number类型，用一个number去匹配string，就会导致无法选中数据，可以这样做 `role_id: user.role_id === null ? undefined : String(user.role_id)`这样就能确保数据类型一致

# useCommonTable

这个表格组件融合了`useVbenVxeGrid`，`useVbenModal`，`useVbenForm`组件，主要入口在index.vue。

> 约定：如果通过provide传递了一个ref，那么这个ref的值可以被子组件修改，如果是普通对象则不能修改

## index.vue

这个组件直接渲染表格和弹窗，全局的`message`也挂载在这里。

主要功能

1. 传递参数，通过`MainProps`获取到的参数在这里进行分配，`TableMain`组件需要的参数通过`v-bind`的形式传递， `ModalForm`的参数在addData，delData，updateData的时候通过modalApi传递。
2. 处理事件，`TableMain`表格会触发增删改的事件，在这里捕获后进行下一步操作，这里只处理表格的事件，不处理表单事件

## modal-form.vue

触发修改或新增数据的时候，会弹窗并显示表单组件，弹窗和表单都做了默认配置，样式也配置好了

主要功能

- 初始化数据，监听`setFormValues`，为true的时候通过modalApi.getData加载表单数据
- 保存表单原始值，originFormData用来保存表单原始值，`setFormValues`为true的时候保存原始值
- 监听表单数据，如果数据有修改需要改变dirty的状态，并把确定按钮改成保存按钮

## table.vue

这个组件用来渲染表格，主要功能是合并外部传递过来的参数，添加左侧增删改按钮，添加右侧刷新和查询按钮

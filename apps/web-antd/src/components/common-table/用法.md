# 通用表格组件

这个组件包含了表格的常用操作CRUD，配合后端标准的filter方法，可以快速的配置出表格。它已经包含表格显示数据和弹窗修改数据

## 使用

导入useCommonTable函数，传入配置参数，它返回一个数组，第一项就是配置好的表格组件。

```ts
import { useCommonTable } from '#/components/common-table';

const [MyTable] = useCommonTable({
  // ...配置项
});
```

配置说明

> 具体的类型在common-table.types中有说明

**gridProps**：配置表格

这里的配置和`useVbenVxeGrid`函数的配置保持一致，可以直接到官网查看对应配置的说明。这里在`table.vue`中做了预设配置，比如在配置gridOptions.columns的时候不需要传递id和日期字段，他会自动添加，这些预设可以被覆盖，所有预设包括：

- gridOptions.columns：表格的checkbox，id，**自己的配置**， create_time，update_time
- toolbarConfig.slots.buttons：表格的新增，修改，删除按钮，
- formOptions.schema：表格查询，后端所有表都包含id，create*time，update_time，db_or_query*字段，这里直接预设这些字段，方便查询
- gridOptions.proxyConfig.response.total：表格总数据，因为用了通用的filter接口，它返回的格式是固定，可以直接在这里统计表格总数量

**formProps**：配置表单

因为表单有修改和新增的情况，这里添加了很多自定义的配置，配置他们可以实现大部分的操作

- getSchema：获取表单schema，表单有新增和修改的情况，在这个函数里面可以通过status参数判断当前状态，返回不同的schema。另外还有一个option参数，可以获取到表单对象的api和表单原始数据，使用api可以判断当前字段是否blur
- getValues：返回表单值，根据不同status返回不同的表单值，表单基本上都有静态值staticValues，可以在返回数据的时候也配置上，如果不返回静态值，会使用默认的字符`-`代替
- handler：表单的增删改查方法，里面有add，del，update方法，组件触发这些炒作的时候会调用这些方法
- valuesChange：表单值有修改时调用，目前表单值有修改的时候，右下角的确定按钮会变成保存，这是默认行为，想要修改这个行为可以配置valuesChange方法。一个用法是，用户勾选修改密码的按钮才判断密码是否修改，不勾选的话直接跳过密码字段。
